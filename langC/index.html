



<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
      
        <link rel="canonical" href="https://eljyw.github.io/cours/langC/">
      
      
        <meta name="author" content="eljyw">
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-4.4.3">
    
    
      
        <title>langage C - Support de cours Informatique</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/application.30686662.css">
      
        <link rel="stylesheet" href="../assets/stylesheets/application-palette.a8b3c06d.css">
      
      
        
        
        <meta name="theme-color" content="#2196f3">
      
    
    
      <script src="../assets/javascripts/modernizr.74668098.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../assets/fonts/material-icons.css">
    
    
    
      
    
    
  </head>
  
    
    
    <body dir="ltr" data-md-color-primary="blue" data-md-color-accent="blue">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="__github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#langage-c-niveau-1" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="https://eljyw.github.io/cours/" title="Support de cours Informatique" class="md-header-nav__button md-logo">
          
            <i class="md-icon"></i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            <span class="md-header-nav__topic">
              Support de cours Informatique
            </span>
            <span class="md-header-nav__topic">
              
                langage C
              
            </span>
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  

<a href="https://github.com/eljyw/cours/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    GitHub
  </div>
</a>
          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main" role="main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="https://eljyw.github.io/cours/" title="Support de cours Informatique" class="md-nav__button md-logo">
      
        <i class="md-icon"></i>
      
    </a>
    Support de cours Informatique
  </label>
  
    <div class="md-nav__source">
      


  

<a href="https://github.com/eljyw/cours/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../intro/" title="Introduction" class="md-nav__link">
      Introduction
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2" checked>
    
    <label class="md-nav__link" for="nav-2">
      Domaines
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        Domaines
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        langage C
      </label>
    
    <a href="./" title="langage C" class="md-nav__link md-nav__link--active">
      langage C
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#presentation-generale" class="md-nav__link">
    Présentation générale
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#introduction-historique" class="md-nav__link">
    Introduction, historique.
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#un-premier-programme" class="md-nav__link">
    Un premier programme.
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#les-types-et-les-variables" class="md-nav__link">
    Les types et les variables
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#les-variables" class="md-nav__link">
    Les variables.
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#les-types-de-bases" class="md-nav__link">
    Les types de bases.
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#construction-de-types" class="md-nav__link">
    Construction de types.
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#les-classes-des-variables" class="md-nav__link">
    Les classes des variables.
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#les-constantes" class="md-nav__link">
    Les constantes.
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#les-operateurs" class="md-nav__link">
    Les opérateurs.
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#booleens" class="md-nav__link">
    Booléens.
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#les-pointeurs" class="md-nav__link">
    Les Pointeurs
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#affectation-des-pointeurs" class="md-nav__link">
    Affectation des pointeurs.
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#procedures-et-fonctions" class="md-nav__link">
    Procédures et fonctions.
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pointeur-de-fonction" class="md-nav__link">
    Pointeur de fonction.
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#recuperation-des-parametres-dune-commande" class="md-nav__link">
    Récupération des paramètres d'une commande.
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#allocation-dynamique" class="md-nav__link">
    Allocation dynamique.
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#le-preprocesseur-c-cpp" class="md-nav__link">
    Le Préprocesseur C : cpp
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#35define" class="md-nav__link">
    #define
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#compilation-conditionnelle" class="md-nav__link">
    Compilation conditionnelle.
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#directives-de-compilation" class="md-nav__link">
    Directives de compilation.
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#les-fonctions-standards-dentrees-sorties" class="md-nav__link">
    Les fonctions standards d'entrées sorties.
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#les-entrees-sorties-par-defaut" class="md-nav__link">
    les entrées sorties par défaut
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../unix/" title="Unix" class="md-nav__link">
      Unix
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#presentation-generale" class="md-nav__link">
    Présentation générale
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#introduction-historique" class="md-nav__link">
    Introduction, historique.
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#un-premier-programme" class="md-nav__link">
    Un premier programme.
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#les-types-et-les-variables" class="md-nav__link">
    Les types et les variables
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#les-variables" class="md-nav__link">
    Les variables.
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#les-types-de-bases" class="md-nav__link">
    Les types de bases.
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#construction-de-types" class="md-nav__link">
    Construction de types.
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#les-classes-des-variables" class="md-nav__link">
    Les classes des variables.
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#les-constantes" class="md-nav__link">
    Les constantes.
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#les-operateurs" class="md-nav__link">
    Les opérateurs.
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#booleens" class="md-nav__link">
    Booléens.
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#les-pointeurs" class="md-nav__link">
    Les Pointeurs
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#affectation-des-pointeurs" class="md-nav__link">
    Affectation des pointeurs.
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#procedures-et-fonctions" class="md-nav__link">
    Procédures et fonctions.
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pointeur-de-fonction" class="md-nav__link">
    Pointeur de fonction.
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#recuperation-des-parametres-dune-commande" class="md-nav__link">
    Récupération des paramètres d'une commande.
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#allocation-dynamique" class="md-nav__link">
    Allocation dynamique.
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#le-preprocesseur-c-cpp" class="md-nav__link">
    Le Préprocesseur C : cpp
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#35define" class="md-nav__link">
    #define
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#compilation-conditionnelle" class="md-nav__link">
    Compilation conditionnelle.
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#directives-de-compilation" class="md-nav__link">
    Directives de compilation.
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#les-fonctions-standards-dentrees-sorties" class="md-nav__link">
    Les fonctions standards d'entrées sorties.
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#les-entrees-sorties-par-defaut" class="md-nav__link">
    les entrées sorties par défaut
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/eljyw/cours/edit/master/docs/langC.md" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                <h1 id="langage-c-niveau-1">Langage C niveau 1</h1>
<p>SUIVI DES VERSIONS DU DOCUMENT</p>
<p>Creation : 1990/10/20</p>
<p>Last change : 2019/10/05 passage en markdown, et aux compilateurs actuelxs.</p>
<hr />
<div class="toc">
<ul>
<li><a href="#langage-c-niveau-1">Langage C niveau 1</a><ul>
<li><a href="#presentation-generale">Présentation générale</a><ul>
<li><a href="#introduction-historique">Introduction, historique.</a></li>
<li><a href="#un-premier-programme">Un premier programme.</a></li>
</ul>
</li>
<li><a href="#les-types-et-les-variables">Les types et les variables</a><ul>
<li><a href="#les-variables">Les variables.</a></li>
<li><a href="#les-types-de-bases">Les types de bases.</a></li>
<li><a href="#construction-de-types">Construction de types.</a></li>
<li><a href="#les-classes-des-variables">Les classes des variables.</a></li>
<li><a href="#les-constantes">Les constantes.</a></li>
<li><a href="#les-operateurs">Les opérateurs.</a></li>
<li><a href="#booleens">Booléens.</a></li>
</ul>
</li>
<li><a href="#les-pointeurs">Les Pointeurs</a><ul>
<li><a href="#affectation-des-pointeurs">Affectation des pointeurs.</a></li>
<li><a href="#procedures-et-fonctions">Procédures et fonctions.</a></li>
<li><a href="#pointeur-de-fonction">Pointeur de fonction.</a></li>
<li><a href="#recuperation-des-parametres-dune-commande">Récupération des paramètres d'une commande.</a></li>
<li><a href="#allocation-dynamique">Allocation dynamique.</a></li>
</ul>
</li>
<li><a href="#le-preprocesseur-c-cpp">Le Préprocesseur C : cpp</a><ul>
<li><a href="#35define">#define</a></li>
<li><a href="#compilation-conditionnelle">Compilation conditionnelle.</a></li>
<li><a href="#directives-de-compilation">Directives de compilation.</a></li>
</ul>
</li>
<li><a href="#les-fonctions-standards-dentrees-sorties">Les fonctions standards d'entrées sorties.</a><ul>
<li><a href="#les-entrees-sorties-par-defaut">les entrées sorties par défaut</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<h2 id="presentation-generale">Présentation générale</h2>
<h3 id="introduction-historique">Introduction, historique.</h3>
<p>Le langage C a été développé par DANIEL RITCHIE au même moment que le système d'exploitation UNIX. Unix a été écrit quasi entièrement en langage C (Sur 13000 lignes de codes, seulement 800 sont écrites en assembleur). Ce n'était pas la première fois qu'un système d'exploitation était écrit dans un langage évolué, mais UNIX est le premier à connaître une large diffusion.</p>
<p>Le langage C est un langage structuré de haut niveau ne faisant que peu (ou pas du tout) de contrôles de type.</p>
<p>Exemple : la variable 'c' étant défini comme caractère 'c = 65;' est correct pour le compilateur C alors que l'équivalent en Pascal (Langage de haut niveau très strict sur les contrôles de type) ferait hurler le compilateur. Les faiblesses du langage C viennent de l'objectif même de ses concepteurs : écrire le système UNIX. Il ne comporte aucune instruction d'entrées sorties de gestion de la mémoire etc ...</p>
<p>Tous ces mécanismes sont fournis dans une bibliothèque de fonctions dans l'environnement système, heureusement le noyau des fonctions (environ 300 fonctions) est le même quelque soit le système sur lequel on travaille que se soit UNIX ou non.</p>
<p>A l'heure actuelle le langage C est normalisé par l'ANSI (depuis décembre 1989).</p>
<p>Le présent document présente les principales difficultés du langage C, il ne constitue pas un cours, pour de plus plus amples détails on se reportera au livre \"Le langage C de Kerningham et Ritchie.\" et si possible à la dernière version .</p>
<h3 id="un-premier-programme">Un premier programme.</h3>
<div class="codehilite"><pre><span></span><span class="cm">/* $cat mini.c */</span>
<span class="kt">void</span> <span class="nf">main</span><span class="p">(</span><span class="kt">void</span><span class="p">){</span>
<span class="p">}</span>
</pre></div>

<div class="codehilite"><pre><span></span><span class="nv">$cc</span> mini.c
<span class="nv">$a</span>.out
$
</pre></div>

<p>Rajoutons une ligne grâce à l'éditeur vi.</p>
<div class="codehilite"><pre><span></span><span class="cm">/* $cat mini.c */</span>
<span class="cp">##include &lt;sdtio.h&gt;</span>

<span class="kt">void</span> <span class="nf">main</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">&quot;Bonjour.</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span> <span class="cm">/* Ceci est un commentaire */</span>
<span class="p">}</span>
</pre></div>

<div class="codehilite"><pre><span></span><span class="nv">$cc</span> mini.c
<span class="nv">$a</span>.out
Bonjour.
$
</pre></div>

<p>Un programme C est formé d'une ou plusieurs fonctions. Une seule est obligatoire, celle qui a pour nom 'main'. En fait c'est le point d'entrée du programme : c'est la première fonction que le programme exécute. La fonction 'main' peut se trouver n'importe où dans le programme (en général au début ou à la fin du programme pour des questions de lisibilité.).</p>
<p>La fonction 'main' exécutera en général d'autres fonctions soit celles qui proviendront du programme lui-même, soit celles qui proviennent de bibliothèques, 'printf' est l'une de ces fonctions sa déclaration se trouve dans le fichier <code>stdio.h</code> qui se trouvent dans le répertoire <code>/usr/include</code> (sous UNIX).</p>
<p>Les parenthèses qui suivent le nom de la fonction encadrent les paramètres qui lui sont passés. Les accolades encadrent les instructions à exécuter (équivalent au Begin End du Pascal). Les commentaires sont encadrés par les suites de caractères '/*' et '*/'.</p>
<p>Un exemple plus conséquent :</p>
<div class="codehilite"><pre><span></span><span class="cm">/*  min.c */</span>
<span class="cp">##include &lt;stdio.h&gt;</span>
<span class="cm">/* </span>
<span class="cm"> * La fonction min renvoie le plus petit des deux entiers qui</span>
<span class="cm"> * lui sont passé en paramètres.</span>
<span class="cm"> */</span>

<span class="kt">int</span> <span class="nf">min</span><span class="p">(</span><span class="kt">int</span> <span class="n">a</span><span class="p">,</span><span class="kt">int</span> <span class="n">b</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">return</span><span class="p">(</span> <span class="n">a</span> <span class="o">&lt;</span> <span class="n">b</span> <span class="o">?</span> <span class="nl">a</span> <span class="p">:</span> <span class="n">b</span><span class="p">);</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="n">main</span><span class="p">.</span><span class="n">c</span><span class="p">(){</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">&quot;le minimum de 4 et 10 est : %d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="n">min</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">4</span><span class="p">));</span>
<span class="p">}</span>
</pre></div>

<div class="codehilite"><pre><span></span><span class="nv">$cc</span> -o min min.c
<span class="nv">$min</span>

le minimum de <span class="m">4</span> et <span class="m">10</span> est : <span class="m">4</span>
$
</pre></div>

<h2 id="les-types-et-les-variables">Les types et les variables</h2>
<h3 id="les-variables">Les variables.</h3>
<p>Les variables peuvent être définies à l'extérieur ou à l'intérieur des fonctions.</p>
<p>A l'intérieur des fonctions les variables n'existent qu'à partir de l'endroit où elles sont déclarées.</p>
<div class="codehilite"><pre><span></span><span class="cm">/* $cat var.c */</span>
<span class="cp">##include &lt;stdio.h&gt;</span>

<span class="kt">int</span> <span class="n">globale_au_fichier</span><span class="p">;</span>

<span class="kt">void</span> <span class="nf">ma_procedure</span><span class="p">()</span>
<span class="p">{</span>
    <span class="kt">int</span> <span class="n">locale_a_la_fonction</span><span class="p">;</span>

    <span class="n">locale_a_la_fonction</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
    <span class="n">globale_au_fichier</span> <span class="o">=</span> <span class="mi">4</span><span class="p">;</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">&quot;procedure: locale_a_la_fonction = %d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">locale_a_la_fonction</span><span class="p">);</span>  
    <span class="n">printf</span><span class="p">(</span><span class="s">&quot;procedure: globale_au_fichier = %d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">globale_au_fichier</span><span class="p">);</span>   
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">main</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
    <span class="kt">int</span> <span class="n">locale_a_la_fonction</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>

    <span class="n">globale_au_fichier</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
    <span class="n">ma_procedure</span><span class="p">();</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">&quot;main: locale_a_la_fonction = %d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">locale_a_la_fonction</span><span class="p">);</span>  
    <span class="n">printf</span><span class="p">(</span><span class="s">&quot;main: globale_au_fichier = %d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">globale_au_fichier</span><span class="p">);</span>   

<span class="p">}</span>
</pre></div>

<div class="admonition warning">
<p class="admonition-title">Attention</p>
<p>le langage C fait la différence entre majuscules et minuscules,
ici les appels à <code>bon()</code> et à <code>BON()</code> ne sont pas identiques, mais correspondent à deux fonctions différentes.</p>
<p>Faire d'autant plus attention que sur certaines implantations du langage C le compilateur fait la différence mais pas l'éditeur de liens.</p>
</div>
<h3 id="les-types-de-bases">Les types de bases.</h3>
<ul>
<li><strong>char</strong> :  caractères</li>
<li><strong>short</strong> : entiers courts</li>
<li><strong>int</strong> : entiers</li>
<li><strong>long</strong> : entiers longs</li>
<li><strong>float</strong> : réels</li>
<li><strong>double</strong> : réels double précision.</li>
</ul>
<p>La taille de ces types (nombre d'octet pris en mémoire) varie suivant les versions. La seule chose qui vous est assuré est que:</p>
<p>char &lt;= short &lt;= int &lt;= long &lt;= float &lt;= double</p>
<p>Tous ces types peuvent recevoir le mot clé <code>unsigned</code> pour non signé.</p>
<div class="admonition example">
<p class="admonition-title">Exemple :</p>
<div class="codehilite"><pre><span></span><span class="kt">int</span> <span class="n">i</span><span class="p">;</span>
<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">c</span><span class="p">;</span>
<span class="kt">long</span> <span class="n">j</span><span class="p">;</span>
</pre></div>

</div>
<h3 id="construction-de-types">Construction de types.</h3>
<p><code>[ ]</code> définit les vecteurs et tableaux</p>
<p><code>struct</code> les structures (équivalent au record du pascal)</p>
<p><code>union</code> équivalent au Record case du Pascal</p>
<p><code>typedef</code> Permet de définir des types</p>
<p><code>*</code>pour les pointeurs.</p>
<h4>Les tableaux:</h4>
<div class="codehilite"><pre><span></span><span class="kt">int</span> <span class="n">tab</span><span class="p">[</span><span class="mi">32</span><span class="p">];</span>        <span class="cm">/* défini un tableau de 32 entiers */</span>
<span class="kt">int</span> <span class="o">*</span> <span class="n">ptr</span><span class="p">[</span><span class="mi">32</span><span class="p">];</span>      <span class="cm">/* défini un tableau de 32 pointeurs sur des entiers.*/</span>
<span class="cm">/*</span>
<span class="cm"> * tableaux à plusieurs dimensions sont définis comme les vecteurs.</span>
<span class="cm"> */</span>
<span class="kt">int</span> <span class="n">matrice</span><span class="p">[</span><span class="mi">20</span><span class="p">][</span><span class="mi">30</span><span class="p">];</span> <span class="cm">/* défini un tableau de 20 lignes de 30 entiers.*/</span>
</pre></div>

<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Il n'est pas possible de borner un tableau le premier élément est toujours le numéro ZERO.</p>
</div>
<p>La taille d'un tableau est une constante, elle ne peut être définie dynamiquement.
le seul cas où la taille peut ne pas être définie est dans la déclaration de
variables d'une fonction. DAns le cas d'un tableau multi-dimensionnel seul le premier
niveau peut ne pas être défini.</p>
<p>Exemple :</p>
<div class="codehilite"><pre><span></span><span class="cm">/* parcours_tab.c */</span>
<span class="cp">#include</span> <span class="cpf">&lt;stdio.h&gt;</span><span class="cp"></span>

<span class="cp">#define MAXSIZE 32</span>

<span class="kt">int</span> <span class="n">tableau</span><span class="p">[</span><span class="n">MAXSIZE</span><span class="p">];</span>
<span class="kt">int</span> <span class="n">i</span><span class="p">;</span>

<span class="kt">void</span> <span class="nf">main</span><span class="p">(</span><span class="kt">int</span> <span class="n">argc</span><span class="p">,</span> <span class="kt">char</span> <span class="o">*</span> <span class="n">argv</span><span class="p">[])</span>
<span class="p">{</span>
    <span class="k">for</span> <span class="p">(</span><span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="n">i</span> <span class="o">&lt;=</span><span class="n">MAXSIZE</span><span class="o">-</span><span class="mi">1</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">tableau</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">i</span><span class="p">;</span>
        <span class="cm">/*</span>
<span class="cm">         * parcours de TOUS les éléments du tableau </span>
<span class="cm">         */</span>
    <span class="p">}</span>
    <span class="k">for</span> <span class="p">(</span><span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">argc</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">){</span>
        <span class="n">printf</span><span class="p">(</span><span class="s">&quot;argument %d: %s</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">argv</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
    <span class="p">}</span>   
<span class="p">}</span>
</pre></div>

<p>On pourrait tout aussi bien écrire le programme de la manière suivante :</p>
<div class="codehilite"><pre><span></span><span class="cm">/* parcours_tab.c */</span>
<span class="cp">#include</span> <span class="cpf">&lt;stdio.h&gt;</span><span class="cp"></span>

<span class="cp">#define MAXSIZE 32</span>

<span class="kt">int</span> <span class="n">tableau</span><span class="p">[</span><span class="n">MAXSIZE</span><span class="p">];</span>
<span class="kt">int</span> <span class="n">i</span><span class="p">;</span>

<span class="kt">void</span> <span class="nf">main</span><span class="p">(</span><span class="kt">int</span> <span class="n">argc</span><span class="p">,</span> <span class="kt">char</span> <span class="o">**</span> <span class="n">argv</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">for</span> <span class="p">(</span><span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="n">i</span> <span class="o">&lt;=</span><span class="n">MAXSIZE</span><span class="o">-</span><span class="mi">1</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">tableau</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">i</span><span class="p">;</span>
        <span class="cm">/*</span>
<span class="cm">         * parcours de TOUS les éléments du tableau </span>
<span class="cm">         */</span>
    <span class="p">}</span>
    <span class="k">for</span> <span class="p">(</span><span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">argc</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">){</span>
        <span class="n">printf</span><span class="p">(</span><span class="s">&quot;argument %d: %s</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">argv</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
    <span class="p">}</span>   
<span class="p">}</span>
</pre></div>

<h4>Les structures:</h4>
<p>Il existe deux manières de définir des structures.</p>
<div class="codehilite"><pre><span></span><span class="k">struct</span> <span class="p">{</span>
    <span class="kt">int</span> <span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">;</span>        <span class="cm">/* Coordonnées d&#39;un pixel \*/</span>
    <span class="kt">int</span> <span class="n">couleur</span><span class="p">;</span>    <span class="cm">/* couleur du pixel \*/</span>
<span class="p">}</span> <span class="n">pix</span><span class="p">,</span> <span class="o">*</span><span class="n">p</span><span class="p">;</span>
</pre></div>

<p>Ici on définit 'pix' comme étant un structure et 'p' comme étant un pointeur sur une structure. La structure définie n'a pas de nom. Les éléments sont accessibles par :</p>
<p>pix.x</p>
<p>pix.y</p>
<p>pix.couleur</p>
<div class="codehilite"><pre><span></span><span class="k">struct</span> <span class="n">point</span> <span class="p">{</span>
    <span class="kt">int</span> <span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">couleur</span><span class="p">;</span>
<span class="p">}</span> <span class="n">pix</span><span class="p">;</span>

<span class="k">struct</span> <span class="n">point</span> <span class="o">*</span><span class="n">p</span><span class="p">;</span>
</pre></div>

<p>La structure a un nom 'point' qui peut être réutiliser dans un programme.</p>
<p>Un autre moyen est d'utiliser le constructeur de type 'typedef'</p>
<div class="codehilite"><pre><span></span><span class="k">typedef</span> <span class="k">struct</span> <span class="n">_point</span><span class="p">{</span>
    <span class="kt">int</span> <span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">couleur</span><span class="p">;</span>
<span class="p">}</span> <span class="n">Point</span><span class="p">;</span> <span class="cm">/* le type point est définit CE N&#39;EST PAS UNE VARIABLE */</span>

<span class="n">Point</span> <span class="n">pix</span><span class="p">;</span>

<span class="k">struct</span> <span class="n">_point</span> <span class="o">*</span><span class="n">p</span><span class="p">;</span>
</pre></div>

<p>le '_point' au niveau de <code>typedef struct _point {</code> n'est pas obligatoire il peut être omis dans ce cas.</p>
<p>Les deux moyens sont bons, et utile dans certains cas pour faire des structures récursives.</p>
<div class="codehilite"><pre><span></span><span class="cm">/* Définition d&#39;une structure de type noeud */</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="p">{</span>
    <span class="n">noeud</span> <span class="o">*</span> <span class="n">fils_gauche</span><span class="p">;</span> <span class="cm">/* Interdit de faire cela */</span>
    <span class="n">noeud</span> <span class="o">*</span> <span class="n">fils_droit</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">valeur</span><span class="p">;</span>
<span class="p">}</span> <span class="n">noeud</span><span class="p">;</span>

<span class="cm">/*</span>
<span class="cm"> * Définition de 2 types de structures</span>
<span class="cm"> * noeud : objet de type noeud</span>
<span class="cm"> * noeudptr :  object de type pointeur vers un objet de type noeud</span>
<span class="cm"> */</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="n">_noeud</span><span class="p">{</span>
    <span class="k">struct</span> <span class="n">_noeud</span> <span class="o">*</span> <span class="n">fils_gauche</span><span class="p">;</span> <span class="cm">/* On définit le nom &#39;_noeud&#39; */</span>
    <span class="k">struct</span> <span class="n">_noeud</span> <span class="o">*</span> <span class="n">fils_droit</span><span class="p">;</span>  <span class="cm">/* qui ne sera utilisé qu&#39;ici */</span>
    <span class="kt">int</span> <span class="n">valeur</span><span class="p">;</span>
<span class="p">}</span> <span class="n">noeud</span><span class="p">,</span><span class="o">*</span><span class="n">noeudptr</span><span class="p">;</span> 
</pre></div>

<p>La manière la plus lisible est d'utiliser la déclaration avec <code>typedef</code>, de plus elle évite de réécrire à chaque fois le mot <code>struct</code>.</p>
<h3 id="les-classes-des-variables">Les classes des variables.</h3>
<p>Dans un soucis de simplification, tout les modificateurs ont été regroupés. Les variables sont caractérisées par leur types et par leurs classe de stockage, c'est à dire leur visibilité : locale ou globale.</p>
<p>Les variables ont une classe par défaut qui dépend de l'endroit où elles sont définies.</p>
<p>Les classes sont : <code>auto</code>, <code>static</code>, <code>extern</code>, <code>const</code>, <code>volatile</code> et <code>register</code>.</p>
<h4>auto</h4>
<p><code>auto</code> n'est autorisé que pour des variables locales à intérieure d'un bloc d'instruction, c'est la déclaration utilisée par défaut. En fait ne sert à rien, à part forcer l'optimiseur de code à ne pas utiliser <code>register</code>.</p>
<h4>static</h4>
<table>
<thead>
<tr>
<th></th>
<th>dans une fonction</th>
<th>Hors d'une fonction</th>
</tr>
</thead>
<tbody>
<tr>
<td>Sans static</td>
<td>Dynamique, locale à la fonction</td>
<td>globale à tous les fichiers</td>
</tr>
<tr>
<td>Avec static</td>
<td>Statique, permanente, visible dans la fonction</td>
<td>Statique, permanente, visible dans le fichier.</td>
</tr>
</tbody>
</table>
<h4>extern</h4>
<p>Permet de faire référence à une variable déjà déclarée, IL N'Y A PAS RESERVATION DE PLACE MEMOIRE, il est indispensable que la variable soit réellement déclarée dans un autre fichier ou module du programme.</p>
<p>En général, on peut se dispenser du mot clé <code>extern</code> mais certains compilateurs veulent que les variables ne soient déclarées qu'une seule fois dans tout le programme.</p>
<h4>volatile</h4>
<p>Permet de dire au compilateur de ne pas faire d'optimisation sur la variable. la variable peut être mise à jour à tout moment par une autre tache (thread).</p>
<h4>const</h4>
<p><code>const</code> permet d'éviter la modification des variables. Elles peuvent juste être initialisées à la déclaration.</p>
<div class="admonition example exemple">
<p class="admonition-title">Example</p>
</div>
<div class="codehilite"><pre><span></span><span class="cp">#include</span> <span class="cpf">&lt;stdio.h&gt;</span><span class="cp"></span>

<span class="kt">size_t</span> <span class="nf">longueur_de_chaine</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span> <span class="n">chaine</span> <span class="p">[]</span> <span class="p">)</span>
<span class="p">{</span>
    <span class="k">register</span> <span class="kt">size_t</span> <span class="n">longueur</span><span class="p">;</span>
    <span class="k">for</span><span class="p">(</span><span class="n">longueur</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">chaine</span><span class="p">[</span><span class="n">longueur</span><span class="p">];</span> <span class="n">longueur</span><span class="o">++</span><span class="p">);</span>
    <span class="k">return</span> <span class="n">longueur</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">main</span><span class="p">(</span><span class="kt">int</span> <span class="n">argc</span><span class="p">,</span> <span class="kt">char</span> <span class="o">**</span> <span class="n">argv</span><span class="p">)</span>
<span class="p">{</span>
    <span class="kt">int</span> <span class="n">i</span><span class="p">;</span>
    <span class="k">for</span> <span class="p">(</span><span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">argc</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">){</span>
        <span class="n">printf</span><span class="p">(</span><span class="s">&quot;argument %2d  - longueur=%3ld - %s</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">longueur_de_chaine</span><span class="p">(</span><span class="o">*</span><span class="p">(</span><span class="n">argv</span><span class="o">+</span><span class="n">i</span><span class="p">)),</span> <span class="n">argv</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>

<h4>register</h4>
<p>Demande que la variable soit rangée dans un registre dans la mesure du possible, c'est à dire qu'il y ait un registre de libre et que la taille de la variable soit inférieure ou égale à celle du registre de la machine.</p>
<p>Ceci est surtout utilisé pour les variables de boucles et accélère de manière sensible l'exécution de programme.</p>
<div class="admonition example">
<p class="admonition-title">Exemple :</p>
<div class="codehilite"><pre><span></span><span class="cm">/* sans.c */</span>
<span class="kt">void</span> <span class="nf">main</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
    <span class="kt">int</span> <span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">,</span><span class="n">s</span><span class="p">;</span>
    <span class="k">for</span><span class="p">(</span><span class="n">i</span><span class="o">=</span><span class="mi">1</span><span class="p">;</span><span class="n">i</span> <span class="o">&lt;=</span><span class="mi">1000</span><span class="p">;</span><span class="n">i</span><span class="o">++</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">s</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="k">for</span><span class="p">(</span><span class="n">j</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="n">j</span> <span class="o">&lt;</span><span class="mi">10000</span><span class="p">;</span><span class="n">j</span><span class="o">+=</span><span class="n">i</span><span class="p">)</span>
            <span class="n">s</span><span class="o">+=</span><span class="n">j</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>

<div class="codehilite"><pre><span></span><span class="cm">/* $cat avec.c */</span>
<span class="kt">void</span> <span class="nf">main</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">register</span> <span class="kt">int</span> <span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">,</span><span class="n">s</span><span class="p">;</span>

    <span class="k">for</span><span class="p">(</span><span class="n">i</span><span class="o">=</span><span class="mi">1</span><span class="p">;</span><span class="n">i</span> <span class="o">&lt;=</span><span class="mi">1000</span><span class="p">;</span><span class="n">i</span><span class="o">++</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">s</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="k">for</span><span class="p">(</span><span class="n">j</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="n">j</span> <span class="o">&lt;</span><span class="mi">10000</span><span class="p">;</span><span class="n">j</span><span class="o">+=</span><span class="n">i</span><span class="p">)</span>
            <span class="n">s</span><span class="o">+=</span><span class="n">j</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>

</div>
<div class="codehilite"><pre><span></span><span class="nv">$cc</span> -o sans sans.c
<span class="nv">$cc</span> -o avec avec.c
<span class="nv">$time</span> sans
<span class="m">0</span>.8 real
<span class="m">0</span>.7 user
<span class="m">0</span>.0 sys

<span class="nv">$time</span> avec
<span class="m">0</span>.7 real
<span class="m">0</span>.3 user
<span class="m">0</span>.0 sys
$
</pre></div>

<p>Avec les machines actuelles il faudra peut être rajouter deux 0 dans les boucles pour voir quelque chose.</p>
<h3 id="les-constantes">Les constantes.</h3>
<p>Les constantes peuvent être de type :</p>
<p>entier : 12 , 012 , 0xff , 0L</p>
<p>réel : 35.2 , .78e-23</p>
<p>caractère : 'c' , '\n' , '\007'</p>
<p>chaîne : \"\0x07Chaine qui \\"sonne\\" et va à la ligne \n\"</p>
<p>Les constantes entières peuvent être en base 10,base 8 (Premier chiffre est un 0 ) ou en base 16 (commençant par 0x). le suffixe <code>L</code> indique une constante de type long.</p>
<p>Le caractère <code>'</code> joue le rôle de caractère d'échappement, il permet de représenter certains caractères:</p>
<p><code>\n</code> fin de ligne</p>
<p><code>\t</code> tabulation</p>
<p><code>\b</code> backspace</p>
<p><code>\r</code> retour chariot</p>
<p><code>\f</code> form feed (saut de page)</p>
<p><code>\\</code> \</p>
<p><code>\"</code> "</p>
<p><code>\'</code> '</p>
<p><code>\0</code> le caractère de code ASCII zéro NULL</p>
<p>Le caractère <code>\</code> permet d'<em>échapper</em> un caractère dans les définitions de constantes caractère ainsi que dans les constantes chaîne.</p>
<div class="admonition example">
<p class="admonition-title">Exemple</p>
<p>chaîne formée de deux guillemets : <code>"\"\""</code>.</p>
</div>
<h3 id="les-operateurs">Les opérateurs.</h3>
<h4>Les opérateurs logiques:</h4>
<p><strong>\&lt;</strong> inférieur</p>
<p><strong>&gt;</strong> supérieur</p>
<p><strong>=></strong> Supérieur ou égal</p>
<p><strong>&lt;=</strong> inférieur ou égal</p>
<p><strong>==</strong> égal</p>
<p><strong>!=</strong> différent</p>
<p><strong>!</strong> non logique</p>
<p><strong>&amp;&amp;</strong> et logique</p>
<p><strong>||</strong> ou logique</p>
<h4>Les opérateurs arithmétiques:</h4>
<p><strong>+</strong> plus</p>
<p><strong>-</strong> moins</p>
<p><strong>*</strong> multiplication</p>
<p><strong>/</strong> division</p>
<p><strong>%</strong> modulo</p>
<p><strong>++</strong> auto-incrémentation (préfixe '++var'ou postfixe 'var++')</p>
<p><strong>--</strong> auto-décrémentation (idem)</p>
<h4>Les opérateurs sur les bits:</h4>
<p><strong>~</strong> complément</p>
<p><strong>&amp;</strong> et</p>
<p><strong>|</strong> ou</p>
<p><strong>^</strong> ou exclusif</p>
<p><strong>&lt;&lt;</strong> décalage de bits vers la droite</p>
<p><strong>&gt;&gt;</strong> décalage de bits vers la gauche</p>
<div class="admonition note">
<p class="admonition-title">Remarque</p>
<p>pour les opérateurs arithmétique et sur les bits on notera le raccourci suivant : 
<code>a (op)=b</code> équivaut à <code>a = a (op) b</code></p>
<p>Ceci est un raccourci d'écriture mais correspond aussi à une optimisation du code du programme.</p>
</div>
<h4>Les opérateurs sur les pointeurs</h4>
<p><strong>*</strong> indirection</p>
<p><strong>&amp;</strong> adresse d'une variable</p>
<p><strong>-&gt;</strong> accès aux champs d'une structure ( p->x est équivalent à (*p).c )</p>
<p>Certains opérateurs acceptent des pointeurs :</p>
<p>+ , - , ++ , -- opérateurs arithmétiques</p>
<p>* , -> indirections</p>
<p>(TYPE) conversion de type</p>
<p>&lt; , &gt; , &lt;= , =&gt; , == , != opérateurs de comparaison</p>
<div class="admonition example">
<p class="admonition-title">Exemple</p>
<p>si p est un pointeur sur un objet et i un entier <code>p + i</code> est l'adresse du i-ème objet suivant l'objet pointé par p</p>
</div>
<h4>Autres opérateurs:</h4>
<p><code>(TYPE)</code> Opérateur unaire permettant de convertir une variable dans le type TYPE .</p>
<p><code>sizeof(OBJET)</code> Taille de l'objet en octets (peut être une variable ou le type d'une variable)</p>
<p>= Affectation simple.</p>
<p><code>e ? e1 : e2</code> Expression conditionnelle sa valeur est e1 si e est vrai e2 sinon.</p>
<p><code>e1,e2,...,eq</code> Liste d'expressions évaluées séquentiellement de e1 puis e2 jusqu'à eq, la valeur de la liste vaut eq</p>
<p>Exemple : <code>(i=2,j=i++,5*j-i)</code> a pour valeur 7, de plus i vaut 3 et j vaut 2</p>
<h3 id="booleens">Booléens.</h3>
<p>Il n'y a pas de variables booléennes (au contraire du Pascal) les expressions sont évalués numériquement, un 0 correspond à FAUX, tout autre valeur correspond à VRAI.</p>
<h2 id="les-pointeurs">Les Pointeurs</h2>
<p>Une variable de type pointeur est une variable contenant une adresse. On peut définir des pointeurs sur des variables de type de base ou sur des variables construites à partir des types de bases.</p>
<p>Le type pointeur d'un objet de type 'TYPE' est : 'TYPE *' .</p>
<p>Exemple :</p>
<div class="codehilite"><pre><span></span><span class="kt">int</span> <span class="o">*</span> <span class="n">p</span><span class="p">;</span> <span class="cm">/* Pointeur sur un entier */</span>
<span class="k">struct</span> <span class="n">_point</span> <span class="o">*</span> <span class="n">pixptr</span><span class="p">;</span><span class="cm">/* Pointeur sur un objet de TYPE _point */</span>
</pre></div>

<p>L'objet pointé par le pointeur 'p' est noté : '*p' , l'adresse d'un objet 'q' est notée ' &amp;q ';</p>
<p>Exemple : (sur les versions actuelles peut donner un warning à la compilation, ne pas en tenir compte)</p>
<div class="codehilite"><pre><span></span><span class="cm">/* $cat demoptr.c */</span>
<span class="cp">##include &lt;stdio.h&gt;</span>

<span class="kt">void</span> <span class="nf">main</span><span class="p">(</span><span class="kt">void</span><span class="p">){</span>
    <span class="kt">int</span> <span class="n">i</span><span class="p">;</span>
    <span class="kt">int</span> <span class="o">*</span><span class="n">p</span><span class="p">;</span>
    <span class="kt">char</span> <span class="o">*</span><span class="n">ch</span><span class="p">;</span>

    <span class="n">i</span> <span class="o">=</span> <span class="mi">10</span><span class="p">;</span>

    <span class="n">p</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">i</span><span class="p">;</span> <span class="cm">/* p contient l&#39;adresse de la variable i */</span>
    <span class="n">ch</span> <span class="o">=</span> <span class="s">&quot;Ceci est une chaîne.</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">;</span>

    <span class="cm">/*</span>
<span class="cm">     * ch contient l&#39;adresse de la chaîne qui sera rangée dans le</span>
<span class="cm">     * segment des données au moment de la génération de code. Le</span>
<span class="cm">     * délimiteur de chaîne EST rajouté au moment de la génération de</span>
<span class="cm">     * code.</span>
<span class="cm">     */</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">&quot;Valeur du contenu à l&#39;adresse de p est %d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="o">*</span><span class="n">p</span><span class="p">);</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">&quot;%s&quot;</span><span class="p">,</span><span class="n">ch</span><span class="p">);</span>
    <span class="n">printf</span><span class="p">(</span><span class="n">ch</span><span class="p">);</span> <span class="cm">/* donne la même chose que la ligne précédente */</span>
<span class="p">}</span>
</pre></div>

<div class="codehilite"><pre><span></span><span class="nv">$cc</span> -o demoptr.e demoptr.c
$
<span class="nv">$demoptr</span>.e
Valeur du contenu à l<span class="err">&#39;</span>adresse de p est <span class="m">10</span>
Ceci est une chaîne.
Ceci est une chaîne.
$
</pre></div>

<p>Les opérations sur les pointeurs sont :</p>
<p>L'affectation simple : <strong>=</strong></p>
<p>Les opérations arithmétiques : <strong>+</strong> , <strong>-</strong> , <strong>++</strong> , <strong>--</strong></p>
<p>L'indirection : <strong>*</strong> , <strong>-></strong></p>
<p>Les conversions de type et le calcul de la taille.</p>
<p>Les opérateurs de comparaison.</p>
<h3 id="affectation-des-pointeurs">Affectation des pointeurs.</h3>
<p>La déclaration d'un pointeur réserve de la place pour le pointeur <strong>ET NON</strong> pour l'objet pointé.</p>
<p>Exemple :</p>
<div class="codehilite"><pre><span></span><span class="cm">/* $cat faux.c */</span>

<span class="kt">void</span> <span class="nf">main</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
    <span class="kt">int</span> <span class="o">*</span><span class="n">p</span><span class="p">;</span> <span class="cm">/* Réservation de place pour le pointeur uniquement */</span>
    <span class="o">*</span><span class="n">p</span> <span class="o">=</span> <span class="mi">120</span><span class="p">;</span> <span class="cm">/* Pas de réservation de place pour l&#39;entier */</span>
<span class="p">}</span>
</pre></div>

<div class="codehilite"><pre><span></span><span class="nv">$cc</span> -o faux faux.c
<span class="nv">$faux</span>

Bus error <span class="o">(</span>core dumped<span class="o">)</span>
$
</pre></div>

<p>ATTENTION la différence de type entre les deux membres lors d'une affectation n'est pas traitée comme une erreur fatale mais donne lieu à un 'warning'.</p>
<p>Exemple :</p>
<div class="codehilite"><pre><span></span><span class="cm">/* $cat demoptr2.c */</span>
<span class="cp">##include &lt;stdio.h&gt;</span>

<span class="kt">void</span> <span class="nf">main</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
    <span class="kt">long</span> <span class="n">i</span><span class="p">;</span>
    <span class="kt">long</span> <span class="o">*</span><span class="n">p</span><span class="p">;</span>
    <span class="kt">char</span> <span class="o">*</span><span class="n">c</span><span class="p">;</span>

    <span class="n">i</span> <span class="o">=</span> <span class="n">p</span><span class="p">;</span> <span class="cm">/*Donne lieu à un warning mais pas une erreur fatale */</span>
    <span class="n">i</span> <span class="o">=</span> <span class="p">(</span><span class="kt">long</span><span class="p">)</span> <span class="n">p</span><span class="p">;</span>
    <span class="cm">/*</span>
<span class="cm">     * Bonne méthode ne donne lieu à aucun commentaire de la part</span>
<span class="cm">     * du compilateur et l&#39;on sait ce que l&#39;on fait !!!!</span>
<span class="cm">     */</span>
    <span class="n">i</span> <span class="o">=</span> <span class="mh">0x41424344</span><span class="p">;</span>
    <span class="n">p</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">i</span><span class="p">;</span>
    <span class="n">c</span> <span class="o">=</span> <span class="p">(</span><span class="kt">char</span> <span class="o">*</span><span class="p">)</span><span class="n">p</span><span class="p">;</span>

    <span class="cm">/* La valeur du pointeur &#39;p&#39; est convertie en pointeur sur</span>
<span class="cm">     * caractère</span>
<span class="cm">     */</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">&quot;%c</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="o">*</span><span class="n">c</span><span class="p">);</span>
    <span class="cm">/* Affiche le contenu du premier octet de la variable &#39;i&#39; ou le dernier*/</span>
<span class="p">}</span>
</pre></div>

<p>La règle à appliquer est de toujours écrire des expressions homogènes pour éviter les warnings, de plus l'on sait ce que l'on fait !!!! (En principe.)</p>
<h4>Les pointeurs et les chaînes de caractères.</h4>
<p>Une chaîne de caractères en C est est une suite d'octets se terminant par le caractère de code ASCII zéro (NULL).</p>
<p>Ainsi \"chaine\" est une constante ayant pour valeur l'adresse d'un zone mémoire dont les 7 premiers octets ont pour valeur 'c' 'h' 'a' 'i' 'n' 'e' ET '\0'.</p>
<p>Exemple :</p>
<div class="codehilite"><pre><span></span><span class="cm">/* $cat demoptr3.c */</span>

<span class="cp">##include &lt;stdio.h&gt;</span>

<span class="kt">char</span> <span class="o">*</span><span class="n">p</span><span class="p">,</span><span class="n">c</span><span class="p">;</span>
<span class="kt">int</span> <span class="n">i</span><span class="p">;</span>

<span class="kt">void</span> <span class="nf">main</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">p</span> <span class="o">=</span> <span class="s">&quot;ABCDEFGHIJKLMNO&quot;</span><span class="p">;</span>
    <span class="n">c</span> <span class="o">=</span> <span class="o">*</span><span class="p">(</span><span class="n">p</span><span class="o">+</span><span class="mi">2</span><span class="p">);</span> <span class="cm">/* c contient le caractère &#39;C&#39;. */</span>
    <span class="n">i</span> <span class="o">=</span> <span class="o">*</span><span class="p">(((</span><span class="kt">int</span> <span class="o">*</span><span class="p">)</span> <span class="n">p</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">);</span>

    <span class="n">printf</span><span class="p">(</span><span class="s">&quot;sizeof(int*) = %ld</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="kt">int</span><span class="o">*</span><span class="p">));</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">&quot;sizeof(int) = %ld</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="kt">int</span><span class="p">));</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">&quot;i = %x</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">i</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>

<p>Regardons la dernière expression de plus prés :</p>
<p><code>(int *) p</code> : p est un pointeur sur des caractères il est converti en pointeur sur un entier.</p>
<p><code>((int *) p) + 1</code> : On obtient l'adresse de l'entier suivant, le déplacement dépend de l'implémentation sur la machine du langage, en pratique on se déplace de 2, 4 ou 8  octets</p>
<p><code>*(((int *) p) + 1)</code> : On obtient la valeur de l'entier suivant (0x45464748 ou 0x48474645 suivant la taille des indiens).</p>
<p>On peut construire une chaîne de caractères de différentes manières:</p>
<ul>
<li>En utilisant les guillemets, la caractère de fin de chaîne (NULL) est automatiquement rajouté.</li>
<li>En remplissant \"à la main\" les zones d'un tableau.</li>
<li>En utilisant des fonctions de la bibliothèque standard du C tel que strcpy, strcat ...</li>
</ul>
<p>Exemple:</p>
<div class="codehilite"><pre><span></span><span class="cm">/* $cat chaine.c */</span>
<span class="cp">##include &lt;stdio.h&gt;</span>
<span class="cp">##include &lt;string.h&gt;</span>

<span class="kt">void</span> <span class="nf">main</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
    <span class="kt">char</span> <span class="n">ch</span><span class="p">[</span><span class="mi">10</span><span class="p">],</span><span class="n">chh</span><span class="p">[</span><span class="mi">10</span><span class="p">];</span>
    <span class="kt">char</span> <span class="o">*</span><span class="n">chaine</span><span class="p">;</span>

    <span class="n">chaine</span> <span class="o">=</span> <span class="s">&quot;ijklmn&quot;</span><span class="p">;</span>      <span class="cm">/* 1ère méthode */</span>
    <span class="n">ch</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="sc">&#39;a&#39;</span><span class="p">;</span>            <span class="cm">/* 2ème méthode */</span>
    <span class="n">ch</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="sc">&#39;b&#39;</span><span class="p">;</span>
    <span class="n">ch</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="sc">&#39;\0&#39;</span><span class="p">;</span>

    <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="n">strcpy</span><span class="p">(</span><span class="n">chh</span><span class="p">,</span><span class="s">&quot;cdefgh&quot;</span><span class="p">);</span> <span class="cm">/* 3ème méthode */</span>
    <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="n">strcat</span><span class="p">(</span><span class="n">ch</span><span class="p">,</span><span class="n">chh</span><span class="p">);</span>

    <span class="n">printf</span><span class="p">(</span><span class="s">&quot;chaine contient : %s</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="n">chaine</span><span class="p">);</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">&quot;chh contient : %s</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="n">chh</span><span class="p">);</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">&quot;ch contient : %s</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="n">ch</span><span class="p">);</span>

    <span class="n">ch</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="sc">&#39;\0&#39;</span><span class="p">;</span>

    <span class="n">printf</span><span class="p">(</span><span class="s">&quot;La chaine S&#39;ARRETE au premier caractère &#39;</span><span class="se">\\</span><span class="s">0&#39;</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">&quot;ch vaut maintenant : %s</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="n">ch</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>

<p>A l'exécution :</p>
<div class="codehilite"><pre><span></span>$./a.out
chaine contient : ijklmn
chh contient : cdefgh
ch contient : abcdefgh
La chaine S<span class="s1">&#39;ARRETE au premier caractère &#39;</span><span class="se">\0</span><span class="err">&#39;</span>
ch vaut maintenant : abcd
$
</pre></div>

<h3 id="procedures-et-fonctions">Procédures et fonctions.</h3>
<p>En C il n'y a pas de différence entre une procédure et une fonction, par défaut une fonction retourne un entier. Une procédure étant une fonction qui ne retourne pas de valeur.</p>
<p>Une fonction peut également retourner l'un des types de base ou un pointeur. </p>
<p>Attention dans une fonction les variables sont de classe 'auto' c'est à dire dynamique. En fait elles sont allouées dans la pile et disparaissent après l'exécution de la fonction.</p>
<p>En C Les paramètres d'un fonction sont TOUS passés par valeurs. Si l'on veut passer des paramètres par référence il est nécessaire de passer l'adresse de la variable.</p>
<p>Exemple :</p>
<div class="codehilite"><pre><span></span><span class="cm">/* $cat para.c*/</span>
<span class="cp">##include &lt;stdio.h&gt;</span>
<span class="cm">/* La fonction swap1 ne marche pas */</span>
<span class="kt">void</span> <span class="nf">swap1</span><span class="p">(</span><span class="kt">int</span> <span class="n">a</span><span class="p">,</span><span class="kt">int</span> <span class="n">b</span><span class="p">)</span>
<span class="p">{</span>
    <span class="kt">int</span> <span class="n">temp</span><span class="p">;</span>
    <span class="n">temp</span> <span class="o">=</span> <span class="n">a</span><span class="p">;</span>
    <span class="n">a</span> <span class="o">=</span> <span class="n">b</span><span class="p">;</span>
    <span class="n">b</span> <span class="o">=</span> <span class="n">temp</span><span class="p">;</span>
<span class="p">}</span>

<span class="cm">/* La fonction swap marche. */</span>
<span class="kt">void</span> <span class="nf">swap</span><span class="p">(</span><span class="kt">int</span> <span class="o">*</span> <span class="n">a</span><span class="p">,</span><span class="kt">int</span> <span class="o">*</span> <span class="n">b</span><span class="p">)</span>
<span class="p">{</span>
    <span class="kt">int</span> <span class="n">temp</span><span class="p">;</span>
    <span class="n">temp</span> <span class="o">=</span> <span class="o">*</span><span class="n">a</span><span class="p">;</span>
    <span class="o">*</span><span class="n">a</span> <span class="o">=</span> <span class="o">*</span><span class="n">b</span><span class="p">;</span>
    <span class="o">*</span><span class="n">b</span> <span class="o">=</span> <span class="n">temp</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">main</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
    <span class="kt">int</span> <span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">;</span>

    <span class="n">a</span> <span class="o">=</span> <span class="mi">10</span><span class="p">;</span>
    <span class="n">b</span> <span class="o">=</span> <span class="mi">5</span><span class="p">;</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">&quot;Les valeurs de a et b sont a=%d , b=%d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">);</span>
    <span class="n">swap1</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">);</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">&quot;la fonction swap1 ne marche pas a=%d , b = %d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">);</span>

    <span class="n">swap</span><span class="p">(</span><span class="o">&amp;</span><span class="n">a</span><span class="p">,</span><span class="o">&amp;</span><span class="n">b</span><span class="p">);</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">&quot;la focntion swap marche a=%d , b = %d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>

<h3 id="pointeur-de-fonction">Pointeur de fonction.</h3>
<p>On peut définir des fonctions sur n'importe quel type de variables; on peut aussi déclarer des pointeurs sur des fonctions.</p>
<p>Exemple:</p>
<div class="codehilite"><pre><span></span><span class="cm">/* $cat foncptr.c */</span>
<span class="cp">##include &lt;stdio.h&gt;</span>

<span class="k">typedef</span> <span class="nf">int</span> <span class="p">(</span><span class="o">*</span><span class="n">adfonc</span><span class="p">)</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="p">);</span>

<span class="cm">/* declare adfonc comme pointeur de fonction retournant un entier. */</span>

<span class="kt">int</span> <span class="nf">f0</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">&quot;La valeur du paramètre de f0 est %d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="n">i</span><span class="p">);</span>
<span class="p">}</span>

<span class="kt">int</span> <span class="nf">f1</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">&quot;La valeur du paramètre de f1 est %d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="n">i</span><span class="p">);</span>
<span class="p">}</span>

<span class="kt">int</span> <span class="nf">f2</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">&quot;La valeur du paramètre de f2 est %d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="n">i</span><span class="p">);</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">main</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
    <span class="kt">int</span> <span class="n">i</span><span class="p">;</span>
    <span class="n">adfonc</span> <span class="n">tab</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="n">f0</span><span class="p">,</span><span class="n">f1</span><span class="p">,</span><span class="n">f2</span><span class="p">};</span>
    <span class="k">for</span> <span class="p">(</span><span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="n">i</span><span class="o">&lt;</span><span class="mi">3</span><span class="p">;</span><span class="n">i</span><span class="o">++</span><span class="p">){</span>
        <span class="p">(</span><span class="o">*</span><span class="n">tab</span><span class="p">[</span><span class="n">i</span><span class="p">])(</span><span class="n">i</span><span class="p">);</span>
    <span class="p">}</span> 
<span class="p">}</span>
</pre></div>

<div class="codehilite"><pre><span></span><span class="nv">$foncptr</span>
La valeur du paramètre de f0 est <span class="m">0</span>
La valeur du paramètre de f1 est <span class="m">1</span>
La valeur du paramètre de f2 est <span class="m">2</span>
$
</pre></div>

<p>Remarque : On écrit tab[0] = f0; et non tab[0] = &f0; car f0 est une constante dont la valeur est l'adresse de la fonction f0() tout comme pour un tableau où t et &amp;t[0] sont équivalents.</p>
<h3 id="recuperation-des-parametres-dune-commande">Récupération des paramètres d'une commande.</h3>
<p>La plupart des commandes UNIX demandent des paramètres pour s'exécuter. De même, il est possible de récupérer des paramètres passés sur la ligne de commande pour nos propres programmes C.</p>
<p>Exemple:</p>
<div class="codehilite"><pre><span></span><span class="cm">/* cat litarg.c */</span>
<span class="cp">##include &lt;stdio.h&gt;</span>
<span class="kt">void</span> <span class="nf">main</span><span class="p">(</span><span class="kt">int</span> <span class="n">argc</span><span class="p">,</span><span class="kt">char</span> <span class="o">**</span> <span class="n">argv</span><span class="p">)</span>
<span class="p">{</span>
    <span class="kt">int</span> <span class="n">i</span><span class="p">;</span>
    <span class="k">for</span><span class="p">(</span><span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="n">i</span><span class="o">&lt;</span><span class="n">argc</span><span class="p">;</span><span class="n">i</span><span class="o">++</span><span class="p">)</span>
        <span class="n">printf</span><span class="p">(</span><span class="s">&quot;Argument n° %d est %s</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="n">i</span><span class="p">,</span><span class="n">argv</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
<span class="p">}</span>
</pre></div>

<div class="codehilite"><pre><span></span><span class="nv">$cc</span> -o arg litarg.c
<span class="nv">$arg</span> bonjour cc -o argument
Argument n° <span class="m">0</span> est arg
Argument n° <span class="m">1</span> est bonjour
Argument n° <span class="m">2</span> est cc
Argument n° <span class="m">3</span> est -o
Argument n° <span class="m">4</span> est argument
$
<span class="nv">$arg</span>
Argument n° <span class="m">0</span> est arg
$
</pre></div>

<p>On remarque qu'un programme possède au moins un argument : le nom du programme.</p>
<p>NOTE : Si vous travaillez sous UNIX Essayer 'arg *' cela vous donnera la liste des fichiers sous votre directory courante.</p>
<div class="codehilite"><pre><span></span><span class="nv">$arg</span> *.c
Argument n° <span class="m">0</span> est arg
Argument n° <span class="m">1</span> est lit_arg.c
Argument n° <span class="m">2</span> est foncptr.c
Argument n° <span class="m">3</span> est para.c
$
</pre></div>

<p>Sous UNIX (ou DOS) il est possible de lire la table d'environnement passée au programme; la déclaration est la suivante :</p>
<div class="codehilite"><pre><span></span><span class="cm">/* $cat env.c */</span>
<span class="cp">##include &lt;stdio.h&gt;</span>

<span class="kt">void</span> <span class="nf">main</span><span class="p">(</span><span class="kt">int</span> <span class="n">argc</span><span class="p">,</span> <span class="kt">char</span> <span class="o">**</span> <span class="n">argv</span><span class="p">,</span> <span class="kt">char</span> <span class="o">**</span> <span class="n">envp</span><span class="p">)</span>
<span class="p">{</span>
    <span class="kt">int</span> <span class="n">i</span><span class="p">;</span>

    <span class="k">for</span><span class="p">(</span><span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="n">envp</span><span class="p">[</span><span class="n">i</span><span class="p">];</span><span class="n">i</span><span class="o">++</span><span class="p">)</span>
        <span class="n">printf</span><span class="p">(</span><span class="s">&quot;%s</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="n">envp</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
    <span class="cm">/* La condition est fausse quand envp[i] vaut NULL (c.à.d 0) */</span>
<span class="p">}</span>
</pre></div>

<div class="codehilite"><pre><span></span><span class="nv">$env</span>
<span class="nv">PATH</span><span class="o">=</span>:/usr/bin:/bin
<span class="nv">HOME</span><span class="o">=</span>/usr/alfred
<span class="nv">TZ</span><span class="o">=</span>GMT0
<span class="nv">TERM</span><span class="o">=</span>VT100
$
</pre></div>

<p>Permet de lire la table d'environnement.</p>
<h3 id="allocation-dynamique">Allocation dynamique.</h3>
<p>L'allocation dynamique nous permet de réserver de l'espace mémoire durant l'exécution du programme.</p>
<p>Exemple sur des listes chainées :</p>
<div class="codehilite"><pre><span></span><span class="cm">/* cat liste.c */</span>

<span class="cp">##include &lt;stdio.h&gt;  </span><span class="cm">/* Fonctions standards d&#39;entrées sorties */</span><span class="cp"></span>
<span class="cp">##include &lt;stdlib.h&gt; </span><span class="cm">/* pour malloc */</span><span class="cp"></span>
<span class="cp">##include &lt;string.h&gt; </span><span class="cm">/* Fonctions de manipulations de chaines */</span><span class="cp"></span>

<span class="cp">##define MAXSIZE 32</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">_LISTE</span> <span class="p">{</span>
    <span class="kt">char</span> <span class="n">nom</span><span class="p">[</span><span class="n">MAXSIZE</span><span class="p">];</span>
    <span class="k">struct</span> <span class="n">_LISTE</span> <span class="o">*</span> <span class="n">suivant</span><span class="p">;</span>
<span class="p">}</span> <span class="n">LISTE</span><span class="p">,</span> <span class="o">*</span><span class="n">LISTEPTR</span><span class="p">;</span>

<span class="n">LISTEPTR</span> <span class="n">deblist</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span> <span class="cm">/* pointeur initialisé à vide */</span>
<span class="n">LISTEPTR</span> <span class="n">finlist</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span>

<span class="cm">/*</span>
<span class="cm"> * Fonction d&#39;ajout d&#39;un élément</span>
<span class="cm"> */</span>
<span class="n">LISTEPTR</span> <span class="nf">ajoute</span><span class="p">(</span><span class="kt">char</span> <span class="o">*</span> <span class="n">s</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">LISTEPTR</span> <span class="n">p</span><span class="p">;</span>
    <span class="cm">/* Allocation d&#39;une nouvelle structure */</span>
    <span class="n">p</span> <span class="o">=</span> <span class="p">(</span><span class="n">LISTEPTR</span><span class="p">)</span> <span class="n">malloc</span><span class="p">(</span><span class="k">sizeof</span><span class="p">(</span><span class="n">LISTE</span><span class="p">));</span>
    <span class="cm">/* mise à 0 de la partie memoire obtenue */</span>
    <span class="p">(</span><span class="kt">void</span><span class="p">)</span> <span class="n">memset</span><span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">LISTE</span><span class="p">),</span> <span class="mi">0</span><span class="p">);</span>

    <span class="cm">/* si p vaut NULL il n&#39;y a plus de place */</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">p</span> <span class="o">==</span> <span class="nb">NULL</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">fprintf</span><span class="p">(</span><span class="n">stderr</span><span class="p">,</span><span class="s">&quot;Dépassement capacité mémoire !!</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
        <span class="n">exit</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">deblist</span> <span class="o">==</span> <span class="nb">NULL</span><span class="p">){</span>
        <span class="n">deblist</span> <span class="o">=</span> <span class="n">finlist</span> <span class="o">=</span> <span class="n">p</span><span class="p">;</span>
    <span class="p">}</span><span class="k">else</span><span class="p">{</span>
        <span class="n">finlist</span><span class="o">-&gt;</span><span class="n">suivant</span> <span class="o">=</span> <span class="n">p</span><span class="p">;</span>
        <span class="n">finlist</span> <span class="o">=</span> <span class="n">p</span><span class="p">;</span>
        <span class="n">finlist</span><span class="o">-&gt;</span><span class="n">suivant</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="cm">/* on recopie en gardant un ocet pour le caratere de fon de chaine */</span>
    <span class="n">strncpy</span><span class="p">(</span><span class="n">finlist</span><span class="o">-&gt;</span><span class="n">nom</span><span class="p">,</span> <span class="n">s</span><span class="p">,</span> <span class="n">MAXSIZE</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span>
    <span class="k">return</span> <span class="n">finlist</span><span class="p">;</span>
<span class="p">}</span>

<span class="cm">/*</span>
<span class="cm"> * Supprimme un élément de la liste</span>
<span class="cm"> */</span>
<span class="kt">void</span> <span class="nf">supprime</span><span class="p">(</span><span class="n">LISTEPTR</span> <span class="n">pl</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">LISTEPTR</span> <span class="n">p</span><span class="p">,</span><span class="n">q</span><span class="p">;</span>

    <span class="k">if</span> <span class="p">(</span><span class="n">pl</span> <span class="o">==</span> <span class="nb">NULL</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span> <span class="cm">/* Si chaine vide on ne fait rien */</span>
    <span class="n">p</span> <span class="o">=</span> <span class="n">q</span> <span class="o">=</span> <span class="n">deblist</span><span class="p">;</span> <span class="cm">/* Initialisation de p et q */</span>

    <span class="k">if</span> <span class="p">(</span><span class="n">pl</span> <span class="o">==</span> <span class="n">deblist</span><span class="p">){</span>
        <span class="n">deblist</span> <span class="o">=</span> <span class="n">deblist</span><span class="o">-&gt;</span><span class="n">suivant</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">pl</span> <span class="o">==</span> <span class="n">finlist</span><span class="p">)</span>
            <span class="n">finlist</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span>
    <span class="p">}</span><span class="k">else</span><span class="p">{</span>
        <span class="k">do</span> <span class="p">{</span>            <span class="cm">/* Parcours de la liste */</span>
            <span class="n">q</span> <span class="o">=</span> <span class="n">p</span><span class="p">;</span>      <span class="cm">/* jusqu&#39;à pl */</span>
            <span class="n">p</span> <span class="o">=</span> <span class="n">p</span><span class="o">-&gt;</span><span class="n">suivant</span><span class="p">;</span>
        <span class="p">}</span> <span class="k">while</span><span class="p">((</span><span class="n">q</span><span class="o">-&gt;</span><span class="n">suivant</span> <span class="o">!=</span> <span class="n">pl</span><span class="p">)</span> <span class="o">||</span> <span class="p">(</span><span class="n">p</span> <span class="o">==</span> <span class="nb">NULL</span><span class="p">));</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">p</span> <span class="o">==</span> <span class="nb">NULL</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span> <span class="cm">/* Si pl n&#39;est pas dans la liste */</span>
        <span class="n">q</span><span class="o">-&gt;</span><span class="n">suivant</span> <span class="o">=</span> <span class="n">p</span><span class="o">-&gt;</span><span class="n">suivant</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">q</span><span class="o">-&gt;</span><span class="n">suivant</span> <span class="o">==</span> <span class="nb">NULL</span><span class="p">)</span> <span class="cm">/* si c&#39;est le dernier element */</span>
            <span class="n">finlist</span> <span class="o">=</span> <span class="n">q</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="n">free</span><span class="p">(</span><span class="n">pl</span><span class="p">);</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">main</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">LISTEPTR</span> <span class="n">p</span><span class="p">;</span>
    <span class="n">LISTEPTR</span> <span class="n">curptr</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span>

    <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="n">ajoute</span><span class="p">(</span><span class="s">&quot;alfred&quot;</span><span class="p">);</span>
    <span class="n">curptr</span> <span class="o">=</span> <span class="n">ajoute</span><span class="p">(</span><span class="s">&quot;michel&quot;</span><span class="p">);</span>
    <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="n">ajoute</span><span class="p">(</span><span class="s">&quot;robert&quot;</span><span class="p">);</span>
    <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="n">ajoute</span><span class="p">(</span><span class="s">&quot;un tres long nom de prenom qui depasse les 32 caractères&quot;</span><span class="p">);</span>

    <span class="cm">/* On affiche la liste */</span>

    <span class="k">for</span><span class="p">(</span><span class="n">p</span><span class="o">=</span><span class="n">deblist</span><span class="p">;</span><span class="n">p</span><span class="p">;</span><span class="n">p</span><span class="o">=</span><span class="n">p</span><span class="o">-&gt;</span><span class="n">suivant</span><span class="p">)</span>
        <span class="n">printf</span><span class="p">(</span><span class="s">&quot;%s</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="n">p</span><span class="o">-&gt;</span><span class="n">nom</span><span class="p">);</span>
    <span class="n">supprime</span><span class="p">(</span><span class="n">curptr</span><span class="p">);</span> <span class="cm">/* On supprime michel*/</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">&quot;michel est supprimé</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>

    <span class="k">for</span><span class="p">(</span><span class="n">p</span><span class="o">=</span><span class="n">deblist</span><span class="p">;</span><span class="n">p</span><span class="p">;</span><span class="n">p</span><span class="o">=</span><span class="n">p</span><span class="o">-&gt;</span><span class="n">suivant</span><span class="p">)</span>
        <span class="n">printf</span><span class="p">(</span><span class="s">&quot;%s</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="n">p</span><span class="o">-&gt;</span><span class="n">nom</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>

<div class="codehilite"><pre><span></span>$
$./liste
alfred
michel
robert
michel est supprimé
alfred
robert
$
</pre></div>

<p>La fonction d'allocation de mémoire est 'malloc' elle alloue le nombre d'octets passé en paramètre.</p>
<div class="admonition warning">
<p class="admonition-title">Attention</p>
<p>toujours passer par la fonction sizeof() pour determiner la taille d'une structure, ceci pour des problèmes de portabilité.</p>
</div>
<p>Exemple :</p>
<div class="codehilite"><pre><span></span><span class="cm">/* mauvais.c */</span>
<span class="kt">void</span> <span class="nf">main</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
    <span class="kt">int</span> <span class="o">*</span><span class="n">p</span><span class="p">;</span>
    <span class="n">p</span> <span class="o">=</span> <span class="p">(</span><span class="kt">int</span> <span class="o">*</span><span class="p">)</span><span class="n">malloc</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span>

    <span class="o">*</span><span class="n">p</span> <span class="o">=</span> <span class="mi">12</span><span class="o">*</span><span class="mi">256</span><span class="o">*</span><span class="mi">256</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>

<div class="codehilite"><pre><span></span><span class="cm">/* bon.c */</span>
<span class="kt">void</span> <span class="nf">main</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
    <span class="kt">int</span> <span class="o">*</span><span class="n">p</span><span class="p">;</span>
    <span class="n">p</span> <span class="o">=</span> <span class="p">(</span><span class="kt">int</span> <span class="o">*</span><span class="p">)</span><span class="n">malloc</span><span class="p">(</span><span class="k">sizeof</span><span class="p">(</span><span class="kt">int</span><span class="p">));</span>

    <span class="o">*</span><span class="n">p</span> <span class="o">=</span> <span class="mi">12</span><span class="o">*</span><span class="mi">256</span><span class="o">*</span><span class="mi">256</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>

<p>Le programme 'mauvais.c' marche sur DOS où la taille des entiers est de 2 octets; mais pas sur d'autres machines où la taille des entiers est de 4 octets (système d'exploitation 32 bits).</p>
<h2 id="le-preprocesseur-c-cpp">Le Préprocesseur C : cpp</h2>
<p>Le préprocesseur permet de faire de la compilation conditionnelle, de définir des macros (comme en assembleur), et de donner des directives de compilation. Toutes ces instructions commencent par le caractère #. Certains compilateurs tiennent absolument à ce que ce soit le premier caractère d'une ligne.</p>
<p>ATTENTION toutes les directives (commençant par #) ne se terminent pas par un point-virgule.</p>
<h3 id="35define">#define</h3>
<p>Permet de définir des entités des macros instructions. Une ligne trop longue peut être coupée par le caractère d'échappement <code>\</code>.</p>
<p>Exemple :</p>
<p><code>#define _UNIX</code> l'entité _UNIX est définie.</p>
<p><code>#define MAX 43</code> Dans tout le programme suivant la définition MAX sera remplacé par 43</p>
<div class="codehilite"><pre><span></span><span class="cm">/* $cat pre.c */</span>
<span class="cp">##include &lt;stdio.h&gt;</span>

<span class="cp">##define COMMENTAIRE() { \</span>
<span class="cp">    printf(&quot;Un #define trop long&quot;); \</span>
<span class="cp">    printf(&quot; être coupé par le caractère \\&quot;); \</span>
<span class="cp">    printf(&quot;\n&quot;); \</span>
<span class="cp">    }</span>

<span class="cp">##if 0</span>
<span class="cp">##define STRCAT(a,b) a</span><span class="cm">/**/</span><span class="cp">b</span>
<span class="cp">##endif</span>

<span class="cp">##define carre(x) ((x)*(x))</span>

<span class="cp">##define fauxcarre(x) x*x</span>

<span class="cp">##define MAX 43</span>

<span class="kt">int</span> <span class="n">i</span><span class="p">;</span>

<span class="kt">void</span> <span class="nf">main</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">i</span> <span class="o">=</span> <span class="mi">4</span><span class="p">;</span><span class="err">#</span><span class="n">include</span> <span class="o">&lt;</span><span class="n">stdio</span><span class="p">.</span><span class="n">h</span><span class="o">&gt;</span>
<span class="cp">##include &lt;string.h&gt;</span>

<span class="cp">##define COMMENTAIRE() { \</span>
<span class="cp">    printf(&quot;Un #define trop long&quot;); \</span>
<span class="cp">    printf(&quot; peut être coupé par le caractère \\&quot;); \</span>
<span class="cp">    printf(&quot;\n&quot;); \</span>
<span class="cp">    }</span>

<span class="cp">##if 1</span>
<span class="cp">##define STR(FONC) str ## FONC</span>
<span class="cp">##define TOSTR(FONC) #FONC</span>
<span class="cp">##endif</span>

<span class="cp">##define carre(x) ((x)*(x))</span>

<span class="cp">##define fauxcarre(x) x*x</span>

<span class="cp">##define MAX 43</span>

<span class="kt">int</span> <span class="n">i</span><span class="p">;</span>

<span class="kt">void</span> <span class="n">main</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">i</span> <span class="o">=</span> <span class="mi">4</span><span class="p">;</span>
    <span class="kt">char</span> <span class="n">chaine</span><span class="p">[</span><span class="mi">32</span><span class="p">]</span> <span class="o">=</span> <span class="s">&quot;str&quot;</span><span class="p">;</span>

    <span class="n">COMMENTAIRE</span><span class="p">();</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">&quot;MAX MAXSIZE %d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="n">MAX</span><span class="p">);</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">&quot;i vaut %d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">i</span><span class="p">);</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">&quot;Le resultat de carre(i+1) est %d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="n">carre</span><span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">));</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">&quot;Le resultat de fauxcarre(i+1) est %d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="n">fauxcarre</span><span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">));</span>
<span class="cp">##if 1</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">&quot;%s</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">STR</span><span class="p">(</span><span class="n">cat</span><span class="p">)(</span><span class="n">chaine</span><span class="p">,</span><span class="n">TOSTR</span><span class="p">(</span><span class="n">cat</span><span class="p">)));</span>
<span class="cp">##endif</span>
<span class="p">}</span>
    <span class="n">COMMENTAIRE</span><span class="p">();</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">&quot;MAX MAXSIZE %d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="n">MAX</span><span class="p">);</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">&quot;i vaut %d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">i</span><span class="p">);</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">&quot;Le resultat de carre(i+1) est %d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="n">carre</span><span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">));</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">&quot;Le resultat de fauxcarre(i+1) est %d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="n">fauxcarre</span><span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">));</span>
<span class="cp">##if 0</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">&quot;%s</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">STRCAT</span><span class="p">(</span><span class="n">str</span><span class="p">,</span><span class="n">cat</span><span class="p">)(</span><span class="s">&quot;aaa&quot;</span><span class="p">,</span> <span class="s">&quot;bbb&quot;</span><span class="p">));</span>
<span class="cp">##endif</span>
<span class="p">}</span>
</pre></div>

<div class="codehilite"><pre><span></span><span class="nv">$cc</span> -o pre pre.c
$./pre
un <span class="c1">#define trop long peut être coupé par le caractère \</span>
MAX MAXSIZE <span class="m">43</span>
i vaut <span class="m">4</span>
Le resultat de carre<span class="o">(</span>i+1<span class="o">)</span> est <span class="m">25</span><span class="p">;</span>
Le resultat de fauxcarre<span class="o">(</span>i+1<span class="o">)</span> est <span class="m">9</span>
strcat
$
</pre></div>

<p>On remarque sur cet exemple tout l'intérêt d'utiliser lesparenthèses dans les pseudo-fonctions.</p>
<p>l'expression <code>carre(i+1)</code> est remplacé AVANT génération de code par <code>(i+1)*(i+1)</code></p>
<p>L'expression <code>fauxcarre(i+1)</code> est remplacé par : <code>i+1*i+1</code> soit par <code>i+i+1</code> ce qui n'est pas le résultat espéré</p>
<h4>directive</h4>
<p>Le # permet de changer le paramètre en chaine de caractère, comme dans la macro de l'exemple précédent <code>TOSTR()</code>.</p>
<h4>directive</h4>
<p>le ## permet la concaténation de 2 mots, comme la macro <code>STR()</code>de l'exemple précèdent.</p>
<p>Ces deux directives permettent de faire du pseudo objet, ou de simplifier des définitions laborieuses.</p>
<h3 id="compilation-conditionnelle">Compilation conditionnelle.</h3>
<p>Exemple:</p>
<div class="codehilite"><pre><span></span><span class="cm">/* $cat cond.c */</span>

<span class="cp">##define _UNIX</span>

<span class="kt">void</span> <span class="nf">main</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
<span class="cp">##ifdef _UNIX</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">&quot;Un :_UNIX est défini</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
<span class="cp">##else</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">&quot;Un : _UNIX n&#39;est pas défini</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
<span class="cp">##endif</span>

<span class="cp">##undef _UNIX</span>

<span class="cp">##ifdef _UNIX</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">&quot;Deux : _UNIX est défini</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
<span class="cp">##else</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">&quot;Deux : _UNIX n&#39;est pas défini</span><span class="se">\n\&quot;</span><span class="s">);</span>
<span class="cp">##endif</span>

<span class="p">}</span>
</pre></div>

<div class="codehilite"><pre><span></span><span class="nv">$cond</span>
Un : _UNIX est défini
Deux : _UNIX n<span class="err">&#39;</span>est pas défini
$
</pre></div>

<p>#undef permet de supprimer une 'variable' précédemment définie.</p>
<p>#ifdef équivalent à if</p>
<p>#else équivalent à else</p>
<h3 id="directives-de-compilation">Directives de compilation.</h3>
<p>La directive '#include' permet d'inclure des fichiers.</p>
<p>Exemple :</p>
<div class="codehilite"><pre><span></span><span class="cp">##include &lt;stdio.h&gt;</span>
<span class="cp">##include &quot;myinclude.h&quot;</span>
</pre></div>

<p>Les noms de fichiers entre \&lt; et > seront cherchés dans le répertoire par défaut du système, sur UNIX dans le répertoire <code>/usr/include</code></p>
<p>Les noms de fichiers entre \" et \" seront cherchés dans le répertoire courant ou les répertoires spécifiés sur la ligne de commande du compliateur puis dans le(s) répertoire(s) par défaut.</p>
<h2 id="les-fonctions-standards-dentrees-sorties">Les fonctions standards d'entrées sorties.</h2>
<p>Les I/O sont de deux sortes : les I/O de haut niveaux qui sont formatées et en général bufferisées.</p>
<p>fopen(),open() : ouverture</p>
<p>fscanf(),read() : lecture formattée, non formattée</p>
<p>fprintf(),write() : écriture formatée, non formattée</p>
<p>fseek(),lseek() : positionnement</p>
<p>fclose(),close() : fermeture</p>
<p>Les fonctions f... travaillent avec un pointeur sur le descripteur de fichier, les autres avec le numéro du descripteur.</p>
<h3 id="les-entrees-sorties-par-defaut">les entrées sorties par défaut</h3>
<p>TROIS Fichiers sont ouverts par défaut :</p>
<p>stdin : entrée standard (clavier par défaut)</p>
<p>stdout : sortie standard (écran par défaut)</p>
<p>stderr : sortie standard (erreur (écran par défaut)</p>
<p>Ils occupent respectivement les numéros de descripteur 0,1 et 2.</p>
<p>Ainsi les appels :</p>
<p>printf(\".... sont équivalents à fprintf(stdout,\"...</p>
<p>scanf(\".... sont équivalents à fscanf(stdin,\"...</p>
<p>Exemple:</p>
<div class="codehilite"><pre><span></span><span class="kt">void</span> <span class="nf">main</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
    <span class="kt">int</span> <span class="n">fd</span><span class="p">,</span><span class="n">n</span><span class="p">;</span>
    <span class="n">fd</span> <span class="o">=</span> <span class="n">open</span><span class="p">(</span><span class="s">&quot;test&quot;</span><span class="p">,</span><span class="mi">0</span><span class="p">);</span> <span class="cm">/* 0 : Ouverture en lecture */</span>
    <span class="k">for</span><span class="p">(</span><span class="n">n</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="n">read</span><span class="p">(</span><span class="n">fd</span><span class="p">,</span><span class="o">&amp;</span><span class="n">c</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">;</span><span class="n">n</span><span class="o">++</span><span class="p">);</span> <span class="cm">/* parcours du fichier */</span>
    <span class="n">close</span><span class="p">(</span><span class="n">fd</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>

<p>Se reporter au chapitre 7 du \"Kernighan et ritchie\"</p>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../intro/" title="Introduction" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Introduction
              </span>
            </div>
          </a>
        
        
          <a href="../unix/" title="Unix" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Unix
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/application.ac79c3b0.js"></script>
      
      <script>app.initialize({version:"1.0.4",url:{base:".."}})</script>
      
    
  </body>
</html>